<html ng-app="app">
<head>
    <link href="bower_components/bootstrap/dist/css/bootstrap.css" rel="stylesheet">
    <link href="site.css" rel="stylesheet">

    <script src="bower_components/underscore/underscore.js"></script>
    <script src="bower_components/angular/angular.js"></script>
    <script src="bower_components/cryptojslib/rollups/aes.js"></script>
    <script src="bower_components/cryptojslib/rollups/sha256.js"></script>

    <script src="encryptionService.js"></script>
    <script src="errorService.js"></script>
    <script src="errorCtrl.js"></script>
    <script src="settingsCtrl.js"></script>
    <script src="recordService.js"></script>
    <script src="recordsCtrl.js"></script>
    <script src="viewerCtrl.js"></script>
    <script src="editorCtrl.js"></script>
    <script src="mainCtrl.js"></script>
    <script src="app.js"></script>
</head>

<!-- TODO: remove mainCtrl - use ui-router and a controller per state -->
<body class="container" ng-controller="mainCtrl">
    <div class="row">
        <div class="banner bg-success col-sm-12">
            <span class="h1">Dayary</span> - day by day
            <button class="btn btn-success pull-right"
                    ng-click="settingsEdit.show = true">
                Settings
            </button>
        </div>
    </div>

    <div class="row">
        <!-- TODO: raise errorCtrl to notification/alert control -->
        <div ng-controller="errorCtrl" class="col-sm-12">
            <div class="bg-danger" ng-show="error">
                Error: {{error}}
                <button type="button" class="close" ng-click="unsetError()">
                    <span>&times;</span>
                </button>
            </div>
        </div>

        <!-- TODO: move this to the viewer section or merge into alertCtrl -->
        <div ng-show="records.empty" class="bg-success col-sm-12">
            Looks like this is a fresh new diary. Start by hitting 'Add' to
            add a new record.
        </div>

        <div ng-include="'records.html'" ng-controller="recordsCtrl">
        </div>

        <div ng-show="states.viewing || states.editing"
             ng-class="{ 'col-sm-9' : !settingsEdit.show, 'col-sm-6': settingsEdit.show }">
            <div ng-if="states.viewing">
                <div ng-include="'viewer.html'"
                     ng-controller="viewerCtrl">
                </div>
            </div>

            <div ng-if="states.editing">
                <div ng-include="'editor.html'"
                     ng-controller="editorCtrl">
                </div>
            </div>
        </div>

        <div ng-show="settingsEdit.show" class="col-sm-3">
            <div ng-include="'settings.html'"
                 ng-controller="settingsCtrl">
            </div>
        </div>
    </div>
<body>
</html>
